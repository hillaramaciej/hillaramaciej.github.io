(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a4a690c"],{"0f5d":function(e,t,n){},"88d8":function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return a})},9395:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n("88d8");function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},s=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),s.forEach(function(t){Object(a["a"])(e,t,n[t])})}return e}},adf7:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{centered:"",size:"lg",title:this.title,"no-close-on-backdrop":"","hide-header-close":"","content-class":"darkModal","footer-class":"centered"},model:{value:e.showMe,callback:function(t){e.showMe=t},expression:"showMe"}},[n("div",[n("div",{staticStyle:{"background-color":"rgba(0,0,0,0.3)",padding:"1px 0 0 13px"}},[n("b-form",{staticStyle:{margin:"5px 5px 20px 5px"},on:{reset:e.onClear}},[n("b-row",{attrs:{"align-v":"center"}},[n("b-col",{attrs:{lg:"5",xs:"12"}},[n("b-form-group",{attrs:{id:"input-group-1",label:e.$t("tableHeadings."+this.dropdown+"Code"),"label-for":"newItemCode"}},[n("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:e.validExcluded,expression:"validExcluded"}],class:{"form-control":!0,"is-invalid":e.errors.has("newItemCode")},attrs:{name:"newItemCode",id:"newItemCode",placeholder:this.$t("placeholders."+this.dropdown+"Code"),"data-vv-as":"Item Code"},model:{value:e.newItem.key_Code,callback:function(t){e.$set(e.newItem,"key_Code",t)},expression:"newItem.key_Code"}}),n("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("newItemCode"),expression:"errors.has('newItemCode')"}],staticClass:"validation-error"},[e._v(e._s(e.errors.first("newItemCode")))])],1)],1),n("b-col",{attrs:{lg:"5",xs:"12"}},[n("b-form-group",{attrs:{id:"input-group-2",label:e.$t("tableHeadings."+this.dropdown+"Desc"),"label-for":"newItemDescription"}},[n("b-form-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"is-invalid":e.errors.has("newItemDescription")},attrs:{name:"newItemDescription",id:"newItemDescription",placeholder:this.$t("placeholders."+this.dropdown+"Desc"),"data-vv-as":"Item Description"},model:{value:e.newItem.keyDesc,callback:function(t){e.$set(e.newItem,"keyDesc",t)},expression:"newItem.keyDesc"}}),n("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("newItemDescription"),expression:"errors.has('newItemDescription')"}],staticClass:"validation-error"},[e._v(e._s(e.errors.first("newItemDescription")))])],1)],1),n("b-col",{attrs:{lg:"2",xs:"12"}},[n("b-button",{attrs:{variant:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.$t("common.add")))])],1)],1)],1)],1),n("v-client-table",{ref:"dropdownTable",attrs:{id:"dropdownTable",data:e.theList,columns:e.columns,options:e.options},scopedSlots:e._u([{key:"key_Code",fn:function(t){var a=t.row;return n("div",{key:e.editMode},[a.isEditing?n("span",[n("b-form-input",{attrs:{type:"text",name:"editItemCode",id:"editItemCode"},model:{value:a.key_Code,callback:function(t){e.$set(a,"key_Code",t)},expression:"row.key_Code"}})],1):n("span",[e._v(e._s(a.key_Code))])])}},{key:"keyDesc",fn:function(t){var a=t.row;return n("div",{key:e.editMode},[a.isEditing?n("span",[n("b-form-input",{attrs:{type:"text",name:"editItemDesc",id:"editItemDesc"},model:{value:a.keyDesc,callback:function(t){e.$set(a,"keyDesc",t)},expression:"row.keyDesc"}})],1):n("span",[e._v(e._s(a.keyDesc))])])}},{key:"actions",fn:function(t){var a=t.row;return n("span",{key:e.editMode},[a.isEditing?n("span",[n("b-button",{staticClass:"smaller",attrs:{type:"button",variant:"primary"},on:{click:function(t){e.update(a),a.isEditing=!1,e.editMode=!e.editMode}}},[e._v(e._s(e.$t("common.save")))]),e._v("  \n                  "),n("b-button",{staticClass:"smaller",attrs:{type:"button",variant:"secondary"},on:{click:function(t){a.key_Code=e.tempItem.key_Code,a.keyDesc=e.tempItem.keyDesc,a.isEditing=!1,e.editMode=!e.editMode}}},[e._v(e._s(e.$t("common.back")))])],1):n("span",[n("b-button",{staticClass:"btn btn-square btn-warning smaller",on:{click:function(t){a.isEditing=!0,e.editMode=!e.editMode,e.tempItem.key_Code=a.key_Code,e.tempItem.keyDesc=a.keyDesc}}},[e._v(e._s(e.$t("common.edit")))]),e._v("  \n              "),n("b-button",{staticClass:"btn btn-square btn-danger smaller",on:{click:function(t){e.deleteDropdownItem(a)}}},[e._v(e._s(e.$t("common.deleteSomething")))])],1)])}}])})],1),n("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[n("b-button",{staticClass:"closeModalButton",attrs:{variant:"secondary"},on:{click:e.closeThis}},[e._v(e._s(e.$t("common.close")))])],1)])},s=[],o=(n("ac4d"),n("8a81"),n("ac6a"),n("96cf"),n("cb0c")),r=n("9395"),i=n("c809"),c=n("2f62"),d={mixins:[i["a"]],name:"DropdownEditModal",props:{showMe:Boolean,dropdown:String},data:function(){return{newItem:{key_Code:"",keyDesc:""},tempItem:{key_Code:"",keyDesc:""},title:"",theList:[],editMode:!1,validExcluded:"",columns:["key_Code","keyDesc","actions"],options:{filterByColumn:!0,perPage:10,perPageValues:[],pagination:{chunk:10,dropdown:!1},skin:"table table-striped",headings:{key_Code:"Code",keyDesc:"Description",actions:""},filterable:["key_Code","keyDesc"],sortable:["key_Code","keyDesc"],editableColumns:["label"],columnsClasses:{label:"dropdownLabel"},highlightMatches:!0,columnsDropdown:!1}}},computed:Object(r["a"])({},Object(c["c"])(["cacheExists","getCache","cacheItemsCount","cacheLastUpdate","cacheGetRowById"])),methods:Object(r["a"])({},Object(c["b"])(["cacheReset","cacheFill","cacheAddItem","cacheDeleteDDLItem","cacheUpdateDDLItem","cacheUpdateItem","cacheSetUpdatedDate","cacheUpdate"]),{closeThis:function(){this.onClear(),this.$emit("closed")},updateContent:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,n,a,s,o,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(""==this.dropdown){e.next=32;break}if(this.title=this.$t("common.edit")+": "+this.$t("tableHeadings."+this.dropdown),this.options.headings.key_Code=this.$t("tableHeadings."+this.dropdown+"Code"),this.options.headings.keyDesc=this.$t("tableHeadings."+this.dropdown+"Desc"),this.cacheExists(this.dropdown)){e.next=11;break}return e.next=7,this.axiosGetData(this.dropdown,this.axeman);case 7:e.sent,1==this.axeman.success&&(this.theList=this.axeman.gotFromApi.model,this.cacheFill({name:this.dropdown,data:this.theList,updateDate:"2019-10-10"})),e.next=12;break;case 11:this.theList=this.getCache(this.dropdown);case 12:for(t=!0,n=!1,a=void 0,e.prev=15,s=this.theList[Symbol.iterator]();!(t=(o=s.next()).done);t=!0)r=o.value,r.isEditing=!1;e.next=23;break;case 19:e.prev=19,e.t0=e["catch"](15),n=!0,a=e.t0;case 23:e.prev=23,e.prev=24,t||null==s.return||s.return();case 26:if(e.prev=26,!n){e.next=29;break}throw a;case 29:return e.finish(26);case 30:return e.finish(23);case 31:this.refreshValidString();case 32:case"end":return e.stop()}},e,this,[[15,19,23,31],[24,,26,30]])}));return function(){return e.apply(this,arguments)}}(),onSubmit:function(e){var t=this;e.preventDefault();this.$validator.validateAll().then(function(e){return e&&t.addDropdownItem(),!1}).catch(function(){return!1})},addDropdownItem:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.mapDropdownItem(this.newItem),e.next=3,this.axiosAddData(this.dropdown,t);case 3:e.sent,1==this.axeman.success&&(t.rowid=t.id,Messenger().post(this.$t("tableHeadings."+this.dropdown)+" "+this.$t("common.extendedBy")+" "+t.key_Code),this.cacheAddItem({name:this.dropdown,data:t,updateDate:this.axeman.updated}),this.refreshValidString(),this.onClear());case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),mapDropdownItem:function(e){var t={key_Code:e.key_Code,keyDesc:e.keyDesc};return t},refreshValidString:function(){this.validExcluded="excluded:";var e=!0,t=!1,n=void 0;try{for(var a,s=this.theList[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var o=a.value;this.validExcluded+=o.key_Code+","}}catch(e){t=!0,n=e}finally{try{e||null==s.return||s.return()}finally{if(t)throw n}}this.validExcluded=this.validExcluded.substring(0,this.validExcluded.length-1),this.validExcluded="required|"+this.validExcluded},deleteDropdownItem:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Deleting: "+t.key_Code),n=this.dropdown+"/"+t.rowid,e.next=4,this.axiosDeleteData(n);case 4:e.sent,this.axeman.success?(this.cacheDeleteDDLItem({name:this.dropdown,id:t.rowid,updateDate:this.axeman.updated}),Messenger().post(this.$t("tableHeadings."+this.dropdown)+" "+this.$t("common.hasBeenShrinked"))):Messenger().post({message:this.axeman.error,type:"error",showCloseButton:!0}),this.refreshValidString();case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),onClear:function(){this.newItem.key_Code="",this.newItem.keyDesc="",this.$validator.reset()},edit:function(e){console.log("Editing: "+e.key_Code)},update:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Edited: "+t.key_Code),n=t,a=this.dropdown+"/"+t.rowid,e.next=5,this.axiosUpdateData(a,n);case 5:e.sent,1==this.axeman.success?(Messenger().post(this.$t("common.edited")+" "+this.$t("tableHeadings."+this.dropdown)+": "+n.key_Code),this.cacheUpdateDDLItem({name:this.dropdown,data:t,updateDate:this.axeman.updated}),this.refreshValidString()):(console.log(this.axeman.error),Messenger().post({message:this.axeman.error,type:"error"}));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}),watch:{dropdown:function(){this.updateContent()}}},u=d,l=(n("ced7"),n("2877")),p=Object(l["a"])(u,a,s,!1,null,"70b95130",null);p.options.__file="DropdownEditModal.vue";t["a"]=p.exports},c809:function(e,t,n){"use strict";n.d(t,"a",function(){return r});n("96cf");var a=n("cb0c"),s=n("bc3a"),o=n.n(s),r={data:function(){return{axeman:{updated:"",gotFromApi:"",sendToApi:"",success:!1,error:""},successCode:200}},methods:{axiosError:function(e){console.log(e.response.data[0].code),console.log(e.response.data[0].description),this.axeman.success=!1,this.axeman.error=e.response.data[0].description},axemanReset:function(){this.axeman.gotFromApi="",this.axeman.sendToApi="",this.axeman.success=!1,this.axeman.error=""},axiosResponseReact:function(e){console.log("Axios response: "+e)},axiosGetLastUpdate:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var a,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t+"/0/LastUpdate",e.next=3,o.a.get(a).then(function(e){e.status==s.successCode?(n.updated=e.data.date,s.axeman.success=!0,console.log("%c> DB("+t+") update: "+n.updated,"color:coral;")):axiosResponseReact(e.status)}).catch(function(e){s.axiosError(e)});case 3:e.sent;case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),axiosGetData:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var a,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t+"/",e.next=3,o.a.get(a).then(function(e){e.status==s.successCode?(console.log("%c> Using DB("+t+")","color:coral;"),n.gotFromApi=e.data,s.axeman.success=!0):axiosResponseReact(e.status)}).catch(function(e){s.axiosError(e)});case 3:e.sent;case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),axiosGetDataForId:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n,a){var s,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=t+"/",e.next=3,o.a.get(s,{params:{id:n}}).then(function(e){e.status==r.successCode?(console.log("%c> Using DB("+t+")","color:coral;"),a.gotFromApi=e.data,r.axeman.success=!0):axiosResponseReact(e.status)}).catch(function(e){r.axiosError(e)});case 3:e.sent;case 4:case"end":return e.stop()}},e,this)}));return function(t,n,a){return e.apply(this,arguments)}}(),axiosGetUpdatedData:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n,a){var s,r,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.axeman.success=!1,s=t+"/GetUpdated",r={dateTime:n},e.next=5,o.a.post(s,r).then(function(e){e.status==i.successCode?(console.log("%c> DB Fetched updated data: "+t,"color:coral;"),a.gotFromApi=e.data,i.axeman.success=!0):axiosResponseReact(e.status)}).catch(function(e){i.axiosError(e)});case 5:e.sent;case 6:case"end":return e.stop()}},e,this)}));return function(t,n,a){return e.apply(this,arguments)}}(),axiosAddData:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var a,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.axeman.success=!1,a=t+"/",console.log(n),e.next=5,o.a.post(a,n).then(function(e){e.status==s.successCode?(console.log("%c> DB added data to: "+a,"color:coral;"),n.id=e.data.id,s.axeman.success=!0,s.axeman.updated=e.data.updateDate):axiosResponseReact(e.status)}).catch(function(e){s.axiosError(e)});case 5:e.sent;case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),axiosDeleteData:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t,e.next=3,o.a.delete(n).then(function(e){e.status==a.successCode?(console.log("%c> DB deleted: "+t,"color:coral;"),a.axeman.success=!0,a.axeman.updated=e.data.updateDate,console.log(a.axeman.updated)):axiosResponseReact(e.status)}).catch(function(e){a.axiosError(e)});case 3:e.sent;case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),axiosUpdateData:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){var a,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t,e.next=3,o.a.put(a,n).then(function(e){e.status==s.successCode?(console.log("%c> DB updated: "+t,"color:coral;"),s.axeman.success=!0,s.axeman.updated=e.data.updateDate):axiosResponseReact(e.status)}).catch(function(e){console.log(e),s.axiosError(e)});case 3:e.sent;case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}}},ced7:function(e,t,n){"use strict";var a=n("0f5d"),s=n.n(a);s.a}}]);
//# sourceMappingURL=chunk-5a4a690c.63718596.js.map